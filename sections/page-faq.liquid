<div class="{{ section.settings.text_color }} {{ section.settings.height }}" style="background-color: {{ section.settings.bg_color }};" data-accordion-holder>
  {%- if section.blocks.size > 0 -%}
    <div class="faq {{ section.settings.width }}" data-section-id="{{ section.id }}" data-section-type="faq">
      {%- for block in section.blocks -%}
        {%- assign current_block = block.settings -%}

        {%- if block.type == 'heading' and current_block.title != blank -%}
          <h3 class="faq__title" {{ block.shopify_attributes }}>{{ current_block.title }}</h3>
        {%- endif -%}

        {%- if block.type == 'question' and current_block.title != blank and current_block.content != blank -%}
          <div class="accordion" data-accordion {{ block.shopify_attributes }}>
            <h4 class="accordion__title" data-focus-element tabindex="0" data-accordion-toggle data-block-id="{{ block.id }}">{{ current_block.title }}</h4>

            <div class="rte accordion__body" data-accordion-body>
              {{ current_block.content }}
            </div>
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>
  {%- endif -%}
</div>

{% schema %}
  {
    "name": "アコーディオングループ",
    "settings": [
      {
        "type": "select",
        "id": "width",
        "label": "幅",
        "default": "wrapper--narrow",
        "options": [
          {"value": "wrapper", "label": "ノーマル"},
          {"value": "wrapper--narrow", "label": "普通"},
          {"value": "wrapper--full", "label": "広い"}
        ]
      },
      {
        "type": "select",
        "id": "height",
        "label": "高さ",
        "default": "margin--medium",
        "options": [
          {"value": "margin--small", "label": "スモール"},
          {"value": "margin--medium", "label": "ミディアム"},
          {"value": "margin--large", "label": "ラージ"},
          {"value": "margin--zero", "label": "ゼロ"}
        ]
      },
      {
        "type": "select",
        "id": "text_color",
        "label": "文字の色",
        "default": "text-dark",
        "options": [
          { "value": "text-light", "label": "白"},
          { "value": "text-dark", "label": "ダーク"}
        ]
      },
      {
        "type": "color",
        "id": "bg_color",
        "label": "背景色",
        "default": "#ffffff"
      }
    ],
    "blocks": [
      {
        "name": "見出し",
        "type": "heading",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "見出し",
            "default": "FAQ"
          }
        ]
      },
      {
        "name": "質問",
        "type": "question",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "質問",
            "default": "よくある質問"
          },
          {
            "type": "richtext",
            "id": "content",
            "label": "回答",
            "default": "<p>配送ポリシー、返品、カスタマーサービスについて詳細を共有する。<\/p>"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "アコーディオングループ",
        "category": "Text",
        "blocks": [
          {
            "type": "heading"
          },
          {
            "type": "question"
          },
          {
            "type": "question"
          },
          {
            "type": "question"
          }
        ]
      }
    ]
  }
{% endschema %}
